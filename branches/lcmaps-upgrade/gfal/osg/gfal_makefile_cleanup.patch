diff -urB org.glite.data.gfal.orig/configure.ac org.glite.data.gfal/configure.ac
--- org.glite.data.gfal.orig/configure.ac	2011-07-08 16:24:33.781880230 -0500
+++ org.glite.data.gfal/configure.ac	2011-07-08 16:27:11.033911177 -0500
@@ -96,7 +96,7 @@
 AC_GSOAP
 
 # Set GSOAP Scripts names
-AC_GSOAP_FIX
+# AC_GSOAP_FIX
 
 # Set CGSI GSOAP Plugin Properties
 AC_CGSI_GSOAP
@@ -186,10 +186,10 @@
     [VOMS_LOCATION=${withval}],
     [VOMS_LOCATION="/opt/lcg"])
 AC_MSG_RESULT([VOMS_LOCATION is ${VOMS_LOCATION}])
-VOMS_CFLAGS="-I${VOMS_LOCATION}/include -I${GLOBUS_LOCATION}/include/${GLOBUS_FLAVOUR}"
+VOMS_CFLAGS="-I${VOMS_LOCATION}/include/voms"
 AC_MSG_RESULT([VOMS_CFLAGS is ${VOMS_CFLAGS}])
-VOMS_THR_LIBS="-L${VOMS_LOCATION}/lib -L${VOMS_LOCATION}/lib64 -lvomsc_${GLOBUS_THR_FLAVOR}"
-VOMS_NOTHR_LIBS="-L${VOMS_LOCATION}/lib -L${VOMS_LOCATION}/lib64 -lvomsc_${GLOBUS_NOTHR_FLAVOR}"
+VOMS_THR_LIBS="-L${VOMS_LOCATION}/lib -L${VOMS_LOCATION}/lib64 -lvomsapi"
+VOMS_NOTHR_LIBS="-L${VOMS_LOCATION}/lib -L${VOMS_LOCATION}/lib64 -lvomsapi"
 AC_MSG_RESULT([VOMS_THR_LIBS is ${VOMS_THR_LIBS}])
 AC_MSG_RESULT([VOMS_NOTHR_LIBS is ${VOMS_NOTHR_LIBS}])
 AC_SUBST(VOMS_LOCATION)
diff -urB org.glite.data.gfal.orig/src/gfal.c org.glite.data.gfal/src/gfal.c
--- org.glite.data.gfal.orig/src/gfal.c	2011-07-08 16:24:33.783880701 -0500
+++ org.glite.data.gfal/src/gfal.c	2011-07-08 16:26:30.277973771 -0500
@@ -20,7 +20,7 @@
 #include <dlfcn.h>
 #include <time.h>
 #include <uuid/uuid.h>
-#include <glite/security/voms/voms_apic.h>
+#include <voms/voms_apic.h>
 #include "gfal_api.h"
 #include "gfal_internals.h"
 
diff -urB org.glite.data.gfal.orig/src/Makefile.am org.glite.data.gfal/src/Makefile.am
--- org.glite.data.gfal.orig/src/Makefile.am	2011-07-08 16:24:33.783880701 -0500
+++ org.glite.data.gfal/src/Makefile.am	2011-07-08 16:26:30.278973754 -0500
@@ -189,7 +189,6 @@
 
 GFAL_SOURCE_FILES = \
     gfal_utils.c \
-    stdsoap2.c \
     gfal_test_checksum.c \
 	checkprotolib.c \
 	gfal.c \
@@ -212,8 +211,6 @@
 
 GFAL_FLAGS = \
 	-I$(LFC_LOCATION)/include/lfc \
-	-DGFAL_ENABLE_RFIO -I/usr/include/shift -I/usr/local/include/shift -I$(DPM_LOCATION)/include/dpm \
-	-DGFAL_ENABLE_DCAP -I$(DCAP_LOCATION)/include \
 	-DGFAL_SECURE \
 	-fPIC -D_LARGEFILE64_SOURCE \
 	-DVERSION=\"$(VERSION)-$(RELEASE)\" \
@@ -238,6 +235,7 @@
 libgfal_la_LIBADD = \
 	-luuid -lc -ldl \
 	$(CGSI_GSOAP_LIBS) \
+        $(GSOAP_LIBS) \
 	$(GLOBUS_GSS_NOTHR_LIBS) \
 	$(GLOBUS_FTP_CLIENT_NOTHR_LIBS) \
 	$(VOMS_NOTHR_LIBS) \
@@ -247,6 +245,7 @@
 	$(GLOBUS_NOTHR_CFLAGS) \
 	$(GLITE_CFLAGS) \
 	$(GFAL_FLAGS) \
+        $(GSOAP_LIBS) \
 	$(GSOAP_CFLAGS) \
 	$(CGSI_GSOAP_CFLAGS) \
 	$(VOMS_CFLAGS)
@@ -262,6 +261,7 @@
 libgfal_pthr_la_LIBADD = \
 	-luuid -lc -ldl \
 	$(CGSI_GSOAP_LIBS) \
+        $(GSOAP_LIBS) \
 	$(GLOBUS_GSS_THR_LIBS) \
 	$(GLOBUS_FTP_CLIENT_THR_LIBS) \
 	$(VOMS_THR_LIBS) \
Only in org.glite.data.gfal/src: Makefile.am.orig
