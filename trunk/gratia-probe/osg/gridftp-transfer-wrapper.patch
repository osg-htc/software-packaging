--- gridftp-transfer_meter.cron.sh	2011-08-22 09:21:22.000000000 -0500
+++ gridftp-transfer/gridftp-transfer_meter.cron.sh	2011-08-22 09:41:51.000000000 -0500
@@ -1,6 +1,5 @@
 #!/bin/bash
-#
-# gridftp-transfer_meter.cron.sh - Shell script used with cron to parse dcache-storage
+# gridftp-transfer_meter.cron.sh - Shell script used with cron to parse gridftp-storage
 #   files for OSG accounting data collection.
 #      By Chris Green <greenc@fnal.gov>  Began 5 Sept 2006
 # $Id: gridftp-transfer_meter.cron.sh,v 1.1 2008/11/19 19:40:17 greenc Exp $
@@ -12,16 +11,6 @@
 Meter_BinDir=$(dirname $0)
 probeconfig_loc=/etc/gratia/gridftp-transfer/ProbeConfig
 
-eval `grep VDTSetupFile $probeconfig_loc`
-for Setupsh in ${VDTSetupFile} '/opt/vdt/setup.sh' '/opt/osg-ce/setup.sh'
-do
-  if [[ -f ${Setupsh} && -r ${Setupsh} ]]; then
-    # Should the output of this be directed to /dev/null?
-    . ${Setupsh} >/dev/null
-    break
-  fi
-done
-
 # Set the working directory, where we expect to find the following
 #    necessary files.
 if [ -d ${Meter_BinDir} ]; then
@@ -48,8 +37,8 @@
 fi
 
 # We need to locate the probe script
-if [ ! -r ./GridftpTransferProbeDriver.py ]; then
-  ${Logger} "The GridftpTransferProbeDriver.py file is not in this directory: $(pwd)"
+if [ ! -r ./GridftpTransferProbeDriver ]; then
+  ${Logger} "The GridftpTransferProbeDriver file is not in this directory: $(pwd)"
   exit -2
 fi
 
@@ -76,18 +65,18 @@
 fi
 export PYTHONPATH
 
-enabled=`${pp_dir}/common/GetProbeConfigAttribute.py EnableProbe`
+enabled=`${pp_dir}/common/GetProbeConfigAttribute EnableProbe`
 (( status = $? ))
 if (( $status != 0 )); then
   echo "ERROR checking probe configuration!" 1>&2
   exit $status
 fi
 if [[ -n "$enabled" ]] && [[ "$enabled" == "0" ]]; then
-  ${pp_dir}/common/DebugPrint.py -l 0 "Probe is not enabled: check $Meter_BinDir/ProbeConfig."
+  ${pp_dir}/common/DebugPrint -l 0 "Probe is not enabled: check $Meter_BinDir/ProbeConfig."
   exit 1
 fi
 
-WorkingFolder=`${pp_dir}/common/GetProbeConfigAttribute.py WorkingFolder`
+WorkingFolder=`${pp_dir}/common/GetProbeConfigAttribute WorkingFolder`
 if [ ! -d ${WorkingFolder} ]; then
   if [ "x${WorkingFolder}" != "x" ] ; then 
     mkdir -p ${WorkingFolder}
@@ -105,23 +94,14 @@
 fi
 
 #--- run the probe ----
-python ./GridftpTransferProbeDriver.py
+python ./GridftpTransferProbeDriver
 
 ExitCode=$?
 
 # If the probe ended in error, report this in Syslog and exit
 if [ $ExitCode != 0 ]; then
-  ${pp_dir}/common/DebugPrint.py -l -1 "ALERT: $0 exited abnormally with [$ExitCode]"
+  ${pp_dir}/common/DebugPrint -l -1 "ALERT: $0 exited abnormally with [$ExitCode]"
   exit $ExitCode
 fi
   
 exit 0
-
-#==================================================================
-# CVS Log
-# $Log: gridftp-transfer_meter.cron.sh,v $
-# Revision 1.1  2008/11/19 19:40:17  greenc
-# Improve version reporting.
-#
-# cron wrapper script for environment.
-#
