Index: globus_gram_job_manager.h
===================================================================
--- globus_gram_job_manager.h.orig	2011-12-08 14:50:31.000000003 -0600
+++ globus_gram_job_manager.h	2011-12-19 14:26:51.000000003 -0600
@@ -353,9 +353,15 @@
      * This is the prefix to directory which will contain host+lrm specific
      * state files. By default, it is $HOME/.globus/job, but can be 
      * modified by -globus-job-dir command-line option
+     * For many job managers, this needs to be on a shared file system
      */
     char *                              job_dir_home;
     /**
+     * This is the location to place the host+lrm specific lock files.
+     * This should not be on a shared file system.
+     */
+    char *                              job_dir_locks;
+    /**
      * Boolean flag indicating whether to enable GSI callouts
      * on GRAM operations or not. Default to no.
      */
Index: globus_gram_job_manager_config.c
===================================================================
--- globus_gram_job_manager_config.c.orig	2011-10-20 13:11:48.000000003 -0500
+++ globus_gram_job_manager_config.c	2011-12-19 14:26:51.000000003 -0600
@@ -564,11 +564,26 @@
         }
     }
 
+    if (config->job_dir_locks == NULL)
+    {               
+        config->job_dir_locks = 
+            globus_common_create_string("%s/%s",
+                    config->job_state_file_dir,
+                    config->logname);
+                    
+        if (config->job_dir_locks == NULL)
+        {           
+            rc = GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED;
+                    
+            goto out;
+        }           
+    }
+
     if (config->job_dir_home == NULL)
     {
         config->job_dir_home = 
-            globus_common_create_string("%s/%s",
-                    config->job_state_file_dir,
+            globus_common_create_string("%s/.globus/%s",
+                    config->home,
                     config->logname);
 
         if (config->job_dir_home == NULL)
Index: globus_gram_job_manager.c
===================================================================
--- globus_gram_job_manager.c.orig	2011-12-19 14:19:30.000000003 -0600
+++ globus_gram_job_manager.c	2011-12-19 14:26:51.000000003 -0600
@@ -209,7 +209,7 @@
     }
     dir_prefix = globus_common_create_string(
             "%s/%s",
-            manager->config->job_dir_home,
+            manager->config->job_dir_locks,
             manager->config->short_hostname);
     if (dir_prefix == NULL)
     {
