From 0189250ed410421b134899ab7398ac72f6ce0272 Mon Sep 17 00:00:00 2001
From: Derek Weitzel <djw8605@gmail.com>
Date: Fri, 13 Sep 2019 12:29:42 -0500
Subject: [PATCH 1/2] Add overwrite, or patch, option to bosco_cluster

---
 src/condor_contrib/bosco/bosco_cluster | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/src/condor_contrib/bosco/bosco_cluster b/src/condor_contrib/bosco/bosco_cluster
index 53510e54d0..a65551daab 100755
--- a/src/condor_contrib/bosco/bosco_cluster
+++ b/src/condor_contrib/bosco/bosco_cluster
@@ -44,6 +44,7 @@ commands:
  -r|--remove [host]         Remove the installed cluster (first in list)
  -s|--status [host]         Get status of installed cluster
  -t|--test [host]           Test the installed cluster (all clusters)
+ -o|--overwrite directory       Patch the bosco installation with a directory structure
  -h|--help                  Show this help message
 
 Where host is user@fqdn.example.com
@@ -744,6 +745,7 @@ fi
 eval set -- "$TEMP"
 
 platform_force=
+patch=
 
 # test and remove could have 0 or 1 parameter
 while true; do
@@ -759,6 +761,7 @@ while true; do
         -s|--status) get_status $2;  shift 2; exit 0 ;;
         -t|--test) test_cluster $2; exit 0 ;;
         -r|--remove) remove_cluster $2; exit 0;;
+        -o|--overwrite) patch=$2; shift 2;;
         
         --) echo "No command found" >&2; usage; exit 1;;
         *) echo "Unknown option: $1" >&2; usage; exit 1;;
@@ -1012,6 +1015,12 @@ if [ ! -n "$PRIVATE_ON_MU" ]; then
     rsync -aq $bosco_passwd_file $remote_glite_dir/etc 2>/dev/null
 fi
 
+# If patch is set, perform the patch
+if [ ! -z "${patch}" ]; then
+    echo "Patching bosco installation from directory: $patch"
+    rsync -aq $patch/ $local_install_dir
+fi
+
 # Do the actual rsync
 show_progress "Installing on cluster $remote_host" rsync -aqK -e "ssh -o ControlMaster=auto -o ControlPath=$ssh_control_path" $local_install_dir $remote_host:
 exit_code=$?

From e4869915b3830273a715ad31bf99d399f0890de9 Mon Sep 17 00:00:00 2001
From: Derek Weitzel <djw8605@gmail.com>
Date: Fri, 13 Sep 2019 12:55:14 -0500
Subject: [PATCH 2/2] Change from patch/overwrite to override

---
 src/condor_contrib/bosco/bosco_cluster | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/src/condor_contrib/bosco/bosco_cluster b/src/condor_contrib/bosco/bosco_cluster
index a65551daab..b582447594 100755
--- a/src/condor_contrib/bosco/bosco_cluster
+++ b/src/condor_contrib/bosco/bosco_cluster
@@ -44,7 +44,7 @@ commands:
  -r|--remove [host]         Remove the installed cluster (first in list)
  -s|--status [host]         Get status of installed cluster
  -t|--test [host]           Test the installed cluster (all clusters)
- -o|--overwrite directory       Patch the bosco installation with a directory structure
+ -o|--override directory    Override the bosco installation with a directory structure
  -h|--help                  Show this help message
 
 Where host is user@fqdn.example.com
@@ -745,7 +745,7 @@ fi
 eval set -- "$TEMP"
 
 platform_force=
-patch=
+override_dir=
 
 # test and remove could have 0 or 1 parameter
 while true; do
@@ -761,7 +761,7 @@ while true; do
         -s|--status) get_status $2;  shift 2; exit 0 ;;
         -t|--test) test_cluster $2; exit 0 ;;
         -r|--remove) remove_cluster $2; exit 0;;
-        -o|--overwrite) patch=$2; shift 2;;
+        -o|--override) override_dir=$2; shift 2;;
         
         --) echo "No command found" >&2; usage; exit 1;;
         *) echo "Unknown option: $1" >&2; usage; exit 1;;
@@ -1016,9 +1016,9 @@ if [ ! -n "$PRIVATE_ON_MU" ]; then
 fi
 
 # If patch is set, perform the patch
-if [ ! -z "${patch}" ]; then
-    echo "Patching bosco installation from directory: $patch"
-    rsync -aq $patch/ $local_install_dir
+if [ ! -z "${override_dir}" ]; then
+    echo "Patching bosco installation from directory: $override_dir"
+    rsync -aq $override_dir/ $local_install_dir
 fi
 
 # Do the actual rsync
